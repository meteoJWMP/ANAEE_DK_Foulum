install.packages("croptimizR")
install.packages("CroptmizR")
devtools::install_github("SticsRPacks/CroptimizR@*release")
devtools::install_github("SticsRPacks/CroptimizR@*release")
devtools::install_github("SticsRPacks/CroptimizR@*release")
remotes::install_github("SticsRPacks/CroptimizR@*release")
install.packages("rlang")
install.packages("rlang")
update.packages()
update.packages()
devtools::install_github("SticsRPacks/CroptimizR@*release")
install.packages("rlang")
install.packages("rlang")
devtools::install_github("SticsRPacks/CroptimizR@*release")
remotes::install_github("SticsRPacks/CroptimizR@*release")
install.packages("C:/Users/au595572/Desktop/CroptimizR-master.zip", repos = NULL, type = "win.binary")
library(`CroptimizR-master`)
library(`CroptimizR`)
usethis::browse_github_pat()
usethis::edit_r_environ()
library(`CroptimizR`)
remotes::install_github("SticsRPacks/CroptimizR@*release")
HMR...HMR_2020.2ndYear <- read.csv("C:/Users/au595572/OneDrive - Aarhus Universitet/NATEF/Data/HMR - HMR_2020-2ndYear.csv")
View(HMR...HMR_2020.2ndYear)
output <- output[which(complete.cases(output)),]
output <- read.csv("C:/Users/au595572/OneDrive - Aarhus Universitet/NATEF/Data/HMR - HMR_2020-2ndYear.csv")
View(HMR...HMR_2020.2ndYear)
output <- output[which(complete.cases(output)),]
output$Chamber <- as.factor(substr(output$Series,9,9))
output$date <- as.Date(substr(output$Series,11,20))
output$date <- as.POSIXct(paste0(substr(output$Series,11,20)," ",substr(output$Series,22,23),":00"))
output$f0 <- as.numeric(output$f0)
output$LR.f0 <- as.numeric(output$LR.f0)
#percentage LR
nrow(output)/length(output$Method=="LR")*100
output
library(doParallel)
library(foreach)
library(Matrix)
rm(list=ls())
cl=makeCluster(2, outfile = "report.txt")
registerDoParallel(cl)
result=foreach (n=1:10,.packages="Matrix" )%dopar%{
variable <-sparseMatrix(dims = c(100,150), i={1}, j={1},x=0)
cat(sprintf("task %d is complete \n",n))
assign(paste("variable",n,sep=""),variable)
return(variable)
}
stopCluster(cl)
getwd()
path1<-"O:\\Tech_AGRO\\Klima\\JWMP\\34_sites\\Output"
Trait<-list.files(path = path1)
load("C:/Users/au595572/OneDrive - Aarhus Universitet/Nick/G_C code/test_18-10-2020.Rdata")
colnames(para_opi)<-c("Site","Year","Ygmax","Nback","sigma_g","beta")
plot(para_opi$Site,para_opi$sigma_g)
boxplot(para_opi$Site,para_opi$sigma_g)
boxplot(para_opi$Site,as.numeric(para_opi$sigma_g))
boxplot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g))
para_opi$Site
as.factor(para_opi$Site)
boxplot(as.factor(para_opi$Site)~as.numeric(para_opi$sigma_g))
boxplot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g))
(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g))
plot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g))
plot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g),xlab="")
plot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g")
plot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g",las=2)
?par
par(mar=c(3.5, 3.5, 2, 1))
plot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g",las=2)
par(mar=c(5.1, 4.1, 4.1, 2.1))
plot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g",las=2)
par(mar=c(10, 4.1, 4.1, 2.1))
plot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g",las=2)
plot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g",las=2)
plot(as.factor(para_opi$Site),as.numeric(para_opi$beta),xlab="",ylab="beta",las=2)
plot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g",las=2)
plot(as.factor(para_opi$Site),as.numeric(para_opi$beta),xlab="",ylab="beta",las=2)
plot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g",las=2)
abline(h=c(0,1),col=2)
plot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g",las=2)
abline(h=c(0,1),col=2)
plot(as.factor(para_opi$Site),as.numeric(para_opi$beta),xlab="",ylab="beta",las=2)
abline(h=c(0,1),col=2)
plot(as.factor(para_opi$Year),as.numeric(para_opi$beta),xlab="",ylab="beta",las=2)
par(mfrow=c(2,1))
plot(as.factor(para_opi$Year),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g",las=2)
plot(as.factor(para_opi$Year),as.numeric(para_opi$beta),xlab="",ylab="beta",las=2)
par(mfrow=c(1,2))
plot(as.factor(para_opi$Year),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g",las=2)
plot(as.factor(para_opi$Year),as.numeric(para_opi$beta),xlab="",ylab="beta",las=2)
plot(as.factor(para_opi$Site),as.numeric(para_opi$Ygmax),xlab="",ylab="Ygmax",las=2)
par(mfrow=c(1,1))
plot(as.factor(para_opi$Site),as.numeric(para_opi$Nback),xlab="",ylab="Nback",las=2)
plot(as.factor(para_opi$Site),as.numeric(para_opi$Ygmax),xlab="",ylab="Ygmax",las=2)
obs
$value[obs$Yield=="Nyield"&obs$variable==0]
obs$value[obs$Yield=="Nyield"&obs$variable==0]
library(vioplot)
vioplot(para_opi$Nback)
vioplot(para_opi$Nback,para_opi$Ygmax)
vioplot(para_opi$Nback,para_opi$Ygmax,para_opi$beta)
vioplot(para_opi$sigma_g,para_opi$beta)
abline(h=c(0,1),col=2)
vioplot(para_opi$sigma_g,para_opi$beta,names = c("sigma_g","beta"))
abline(h=c(0,1),col=2)
hist(para_opi$sigma_g)
hist(para_opi$sigma_g,freq = F)
hist(para_opi$sigma_g,freq = T)
hist(para_opi$sigma_g,freq = F)
x11()
par(mar=c(10, 4.1, 4.1, 2.1))
plot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g",las=2)
abline(h=c(0,1),col=2)
vioplot(para_opi$sigma_g,para_opi$beta,names = c("sigma_g","beta"),main="sigma_g and beta")
x11()
par(mar=c(10, 4.1, 4.1, 2.1))
plot(as.factor(para_opi$Site),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g",las=2,main="sigma_g")
abline(h=c(0,1),col=2)
plot(as.factor(para_opi$Site),as.numeric(para_opi$beta),xlab="",ylab="beta",las=2,main="beta")
abline(h=c(0,1),col=2)
par(mfrow=c(1,2))
plot(as.factor(para_opi$Year),as.numeric(para_opi$sigma_g),xlab="",ylab="sigma_g",las=2,main="sigma_g")
abline(h=c(0,1),col=2)
plot(as.factor(para_opi$Year),as.numeric(para_opi$beta),xlab="",ylab="beta",las=2,main="beta")
abline(h=c(0,1),col=2)
par(mfrow=c(1,1))
plot(as.factor(para_opi$Site),as.numeric(para_opi$Nback),xlab="",ylab="Nback",las=2,main="Nback")
plot(as.factor(para_opi$Site),as.numeric(para_opi$Ygmax),xlab="",ylab="Ygmax",las=2,main="Ygmax")
library(vioplot)
vioplot(para_opi$sigma_g,para_opi$beta,names = c("sigma_g","beta"),main="sigma_g and beta")
abline(h=c(0,1),col=2)
all_obs
all_output
dev.off()
dev.off()
plot(as.factor(para_opi$Year),as.numeric(para_opi$Nback),xlab="",ylab="Nback",las=2,main="Nback")
plot(as.factor(para_opi$Year),as.numeric(para_opi$Ygmax),xlab="",ylab="Ygmax",las=2,main="Ygmax")
par(mfrow=c(1,2))
plot(as.factor(para_opi$Year),as.numeric(para_opi$Nback),xlab="",ylab="Nback",las=2,main="Nback")
plot(as.factor(para_opi$Year),as.numeric(para_opi$Ygmax),xlab="",ylab="Ygmax",las=2,main="Ygmax")
x11()
plot(as.factor(para_opi$Year),as.numeric(para_opi$Nback),xlab="",ylab="Nback",las=2,main="Nback")
plot(as.factor(para_opi$Year),as.numeric(para_opi$Ygmax),xlab="",ylab="Ygmax",las=2,main="Ygmax")
par(mfrow=c(1,2))
plot(as.factor(para_opi$Year),as.numeric(para_opi$Nback),xlab="",ylab="Nback",las=2,main="Nback")
plot(as.factor(para_opi$Year),as.numeric(para_opi$Ygmax),xlab="",ylab="Ygmax",las=2,main="Ygmax")
Sys.setlocale(category = "LC_ALL", locale = "English_United States.1252")
rm(list = ls())
labels_2 <- data.frame(matrix(nrow=12,ncol=4))
names(labels_2) = c("number","depth","subplot","species")
labels_2[1,] <- c("T1","-5","A1","2018 Festulolium")
labels_2[2,] <- c("T2","-20","A1","2018 Festulolium")
labels_2[3,] <- c("T3","-5","Out","2018 Festulolium")
labels_2[4,] <- c("T4","-20","Out","2018 Festulolium")
labels_2[5,] <- c("T5","-5","A2","2018 Festulolium")
labels_2[6,] <- c("T6","-20","A2","2018 Festulolium")
labels_2[7,] <- c("T7","-5","A3","2012 Festulolium")
labels_2[8,] <- c("T8","-20","A3","2012 Festulolium")
labels_2[9,] <- c("T9","-5","Out","2012 Festulolium")
labels_2[10,] <- c("T10","-20","Out","2012 Festulolium")
labels_2[11,] <- c("T11","-5","A4","2012 Festulolium")
labels_2[12,] <- c("T12","-20","A4","2012 Festulolium")
labels_1 <- data.frame(matrix(nrow=12,ncol=4))
names(labels_1) = c("number","depth","subplot","species")
labels_1[1,] <- c("T13","-5","Out","GrassClover")
labels_1[2,] <- c("T14","-20","Out","GrassClover")
labels_1[3,] <- c("T15","-5","Out","GrassClover")
labels_1[4,] <- c("T16","-20","Out","GrassClover")
labels_1[5,] <- c("T17","-5","Out","GrassClover")
labels_1[6,] <- c("T18","-20","Out","GrassClover")
labels_1[7,] <- c("T19","-5","A5","Triticale")
labels_1[8,] <- c("T20","-20","A5","Triticale")
labels_1[9,] <- c("T21","-5","Out","Triticale")
labels_1[10,] <- c("T22","-20","Out","Triticale")
labels_1[11,] <- c("T23","-5","A6","Triticale")
labels_1[12,] <- c("T24","-20","A6","Triticale")
# functions ------------------------------------------------------------
plotting_all_TDR_NEW <- function(x,label=NULL){
x <- x[,c(5:16,65)]
for(i in 1:12){
minimum=floor(min(as.numeric(x[,1]),as.numeric(x[,2]),as.numeric(x[,3]),as.numeric(x[,4]),as.numeric(x[,5]),as.numeric(x[,6]),as.numeric(x[,7]),as.numeric(x[,8]),as.numeric(x[,9]),as.numeric(x[,10]),as.numeric(x[,11]),as.numeric(x[,12]),na.rm = T))
maximum=ceiling(max(as.numeric(x[,1]),as.numeric(x[,2]),as.numeric(x[,3]),as.numeric(x[,4]),as.numeric(x[,5]),as.numeric(x[,6]),as.numeric(x[,7]),as.numeric(x[,8]),as.numeric(x[,9]),as.numeric(x[,10]),as.numeric(x[,11]),as.numeric(x[,12]),na.rm = T))
names(x) <- c(paste("T",seq(1:12),sep=""),"date")
jpeg(filename = paste(i,".jpg",sep=""))
plot(x$date,x[,i],xlab="Time",ylab= "%",type="b",ylim=c(minimum,maximum),main = label[i,])
dev.off()
}
}
plotting_all_temp <- function(x,label=NULL){
x <- x[,c(17:28,65)]
for(i in 1:12){
minimum=floor(min(as.numeric(x[,1]),as.numeric(x[,2]),as.numeric(x[,3]),as.numeric(x[,4]),as.numeric(x[,5]),as.numeric(x[,6]),as.numeric(x[,7]),as.numeric(x[,8]),as.numeric(x[,9]),as.numeric(x[,10]),as.numeric(x[,11]),as.numeric(x[,12]),na.rm = T))
maximum=ceiling(max(as.numeric(x[,1]),as.numeric(x[,2]),as.numeric(x[,3]),as.numeric(x[,4]),as.numeric(x[,5]),as.numeric(x[,6]),as.numeric(x[,7]),as.numeric(x[,8]),as.numeric(x[,9]),as.numeric(x[,10]),as.numeric(x[,11]),as.numeric(x[,12]),na.rm = T))
names(x) <- c(paste("T",seq(1:12),sep=""),"date")
jpeg(filename = paste(i,".jpg",sep=""))
plot(x$date,x[,i],xlab="Time",ylab= "Temperature (degrees C)",type="b",ylim=c(minimum,maximum),main = label[i,])
dev.off()
}
}
plotting_all_Quantum <- function(x){
for(i in 2:ncol(x)){
jpeg(filename = paste(i,".jpg",sep=""))
plot(x$date,x[,i],xlab="Time",ylab=names(x)[i],type="b")
dev.off()
}
}
# MARK 2.1 -------------------------------------------------------------
setwd("//DFS05.UNI.AU.DK//dfs//Tech_AGRO//Klima//JWMP//Meteo_figures_Foulum//github//ANAEE_DK_Foulum//Mark_2_1//TDR//")
Mark_2_1_TDR <- read.csv("//DFS05.UNI.AU.DK//dfs//Tech_AGRO//Foulumgaard\\AnaEE\\Campbell\\Mark2.1+Router_TDR_Field2_1.dat",skip=1,as.is=T)
Mark_2_1_TDR <- Mark_2_1_TDR[3:nrow(Mark_2_1_TDR),]
Mark_2_1_TDR$TIMESTAMP <- as.POSIXct(Mark_2_1_TDR$TIMESTAMP,format="%Y-%m-%d %H:%M:%OS")
data <- fRequent::zootodf(Mark_2_1_TDR[,2:ncol(Mark_2_1_TDR)])
data$date <- Mark_2_1_TDR$TIMESTAMP
date_now <- min(Sys.Date(),as.Date(data$date)[nrow(data)])
oneweek <- date_now-7
data$pure_date <- as.Date(data$date)+1
subdata <- data[max(which(data$pure_date==oneweek),1):max(which(data$pure_date==date_now)),]
labels_1 <- cbind(labels_1,subdata$pure_date[nrow(subdata)])
labels_1$`subdata$pure_date[nrow(subdata)]` <- as.character(labels_1$`subdata$pure_date[nrow(subdata)]`)
plotting_all_TDR_NEW(x = subdata,label = labels_1)
setwd("//DFS05.UNI.AU.DK//dfs//Tech_AGRO//Klima//JWMP//Meteo_figures_Foulum//github//ANAEE_DK_Foulum//Mark_2_1//Temp//")
plotting_all_temp(x = subdata,label = labels_1)
###########################
setwd("//DFS05.UNI.AU.DK//dfs//Tech_AGRO//Klima//JWMP//Meteo_figures_Foulum//github//ANAEE_DK_Foulum//Mark_2_1//Quantum//")
Mark_2_1_Quantum <- read.csv("//DFS05.UNI.AU.DK//dfs//Tech_AGRO//Foulumgaard\\AnaEE\\Campbell\\Mark2.1+Router_Quantum_Field2_1.dat",skip=1,as.is=T)
Mark_2_1_Quantum <- Mark_2_1_Quantum[3:nrow(Mark_2_1_Quantum),]
Mark_2_1_Quantum$TIMESTAMP <- as.POSIXct(Mark_2_1_Quantum$TIMESTAMP,format="%Y-%m-%d %H:%M:%OS")
data <- fRequent::zootodf(Mark_2_1_Quantum[,2:ncol(Mark_2_1_Quantum)])
data$date <- Mark_2_1_Quantum$TIMESTAMP
date_now <- min(Sys.Date(),as.Date(data$date)[nrow(data)])
oneweek <- date_now-7
date <- as.Date(data$date)+1
subdata <- data[max(which(date==oneweek),1):max(which(date==date_now),date_now),]
plotting_all_Quantum(subdata)
# MARK 2.2 -------------------------------------------------------------
setwd("//DFS05.UNI.AU.DK//dfs//Tech_AGRO//Klima//JWMP//Meteo_figures_Foulum//github//ANAEE_DK_Foulum//Mark_2_2//TDR//")
Mark_2_2_TDR <- read.csv("//DFS05.UNI.AU.DK//dfs//Tech_AGRO//Foulumgaard\\AnaEE\\Campbell\\Mark 2.2 igennem mark 2.1_TDR_Field2_2.dat",skip=1,as.is=T)
Mark_2_2_TDR <- Mark_2_2_TDR[3:nrow(Mark_2_2_TDR),]
Mark_2_2_TDR$TIMESTAMP <- as.POSIXct(Mark_2_2_TDR$TIMESTAMP,format="%Y-%m-%d %H:%M:%OS")
data <- fRequent::zootodf(Mark_2_2_TDR[,2:ncol(Mark_2_2_TDR)])
data$date <- Mark_2_2_TDR$TIMESTAMP
date_now <- min(Sys.Date(),as.Date(data$date)[nrow(data)])
oneweek <- date_now-7
data$pure_date <- as.Date(data$date)+1
subdata <- data[max(which(data$pure_date==oneweek),1):max(which(data$pure_date==date_now)),]
labels_2 <- cbind(labels_2,subdata$pure_date[nrow(subdata)])
labels_2$`subdata$pure_date[nrow(subdata)]` <- as.character(labels_2$`subdata$pure_date[nrow(subdata)]`)
plotting_all_TDR_NEW(x = subdata,label = labels_2)
setwd("//DFS05.UNI.AU.DK//dfs//Tech_AGRO//Klima//JWMP//Meteo_figures_Foulum//github//ANAEE_DK_Foulum//Mark_2_2//Temp//")
plotting_all_temp(x = subdata,label = labels_2)
# ###########################
setwd("//DFS05.UNI.AU.DK//dfs//Tech_AGRO//Klima//JWMP//Meteo_figures_Foulum//github//ANAEE_DK_Foulum//Mark_2_2//Quantum//")
Mark_2_2_Quantum <- read.csv("//DFS05.UNI.AU.DK//dfs//Tech_AGRO//Foulumgaard\\AnaEE\\Campbell\\Mark 2.2 igennem mark 2.1_Quantum_Field2_2.dat",skip=1,as.is=T)
Mark_2_2_Quantum <- Mark_2_2_Quantum[3:nrow(Mark_2_2_Quantum),]
Mark_2_2_Quantum$TIMESTAMP <- as.POSIXct(Mark_2_2_Quantum$TIMESTAMP,format="%Y-%m-%d %H:%M:%OS")
data <- fRequent::zootodf(Mark_2_2_Quantum[,2:ncol(Mark_2_2_Quantum)])
data$date <- Mark_2_2_Quantum$TIMESTAMP
date_now <- min(Sys.Date(),as.Date(data$date)[nrow(data)])
oneweek <- date_now-7
data$pure_date <- as.Date(data$date)+1
subdata <- data[max(which(data$pure_date==oneweek),1):max(which(data$pure_date==date_now),date_now),]
plotting_all_Quantum(subdata)
setwd("O:\\Tech_AGRO\\Klima\\JWMP\\Meteo_figures_Foulum\\github\\ANAEE_DK_Foulum")
system("O:\\Tech_AGRO\\Klima\\JWMP\\Meteo_figures_Foulum\\github\\ANAEE_DK_Foulum\\push_git.cmd")
